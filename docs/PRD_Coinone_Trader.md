# 📄 제품 요구 사항 문서 (PRD) - 신규 자동 매매 시스템 (BTC/SOL)

## 1. 개요

- **목표**: 기존 시스템과 별도로, 코인원의 API를 활용하여 비트코인(BTC) 또는 솔라나(SOL) 단일 종목에 대한 **신규 자동 매매 시스템**을 구축합니다. Gemini 2.5 Pro를 통해 매일 매매 알고리즘의 파라미터를 최적화합니다. 본 문서는 해당 신규 시스템의 개발 요구사항을 정의합니다.

## 2. 주요 기능

- **데이터 수집**: 코인원 API를 통해 실시간 시세, 캔들차트, 오더북, 최근 체결 데이터를 수집
- **매매 알고리즘**: 기술적 지표(RSI, 볼린더 밴드 등)를 활용한 매수/매도 신호 생성 및 손절, 이익 실현 조건 설정
- **파라미터 최적화**: Gemini 2.5 Pro를 활용하여 매일 **이전 거래의 손익 결과를 반영하여** 알고리즘의 파라미터를 자동으로 조정
- **자동 매매 실행**: 코인원 API를 통해 매수/매도 주문을 자동 실행
- **모니터링 및 로깅**: 거래 내역, 수익률, 오류 등을 기록 및 모니터링

## 3. 기술 스택

- **프로그래밍 언어**: Python
- **API 연동**: 코인원 API, Gemini 2.5 Pro API
- **데이터 저장**: SQLite 또는 PostgreSQL
- **스케줄링**: **Zappa events** (매분 거래 로직 실행, 매일 파라미터 최적화)
- **로깅 및 모니터링**: Loguru, Prometheus, Grafana

## 4. TODO 리스트

### 1. 환경 설정

- [x] Python 가상 환경 생성 및 필요한 패키지 설치
- [x] 코인원 API 키 발급 및 설정
- [x] Gemini 2.5 Pro API 키 발급 및 설정
- [x] **Zappa 설정 및 배포 환경 구성**

### 2. 데이터 수집 모듈 개발

- [x] 코인원 캔들차트 데이터 수집 함수 구현
- [x] 코인원 오더북 데이터 수집 함수 구현
- [x] 코인원 최근 체결 데이터 수집 함수 구현

### 3. 매매 알고리즘 구현

- [x] 기술적 지표 계산 함수 구현 (RSI, 볼린더 밴드 등)
- [x] 매수/매도 신호 생성 로직 구현
- [x] 손절 및 이익 실현 조건 설정

### 4. 파라미터 최적화 모듈 개발

- [x] 최근 거래 데이터 및 손익 결과를 기반으로 파라미터 최적화 요청 생성
- [x] Gemini 2.5 Pro API를 통해 최적화된 파라미터 수신
- [x] 최적화된 파라미터를 알고리즘에 적용

### 5. 자동 매매 실행 모듈 개발

- [x] 코인원 API를 통한 매수/매도 주문 실행 함수 구현
- [x] 주문 상태 확인 및 오류 처리 로직 구현

### 6. 모니터링 및 로깅 시스템 구축

- [ ] 거래 내역 및 수익률 로깅
- [ ] 오류 및 예외 상황 로깅
- [ ] 모니터링 대시보드 구축 (예: Grafana)

## 7. 스케줄링 및 자동화

- [ ] **Zappa event를 활용한 일일 파라미터 최적화 작업 스케줄링**
- [ ] **Zappa event를 활용한 매분 데이터 수집 및 매매 실행 스케줄링**

## 8. 테스트 및 배포

- [ ] 단위 테스트 및 통합 테스트 수행
- [ ] 시스템 배포 및 운영 환경 설정
